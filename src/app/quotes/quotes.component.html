<div class="row">
  <div class="col-md-10 order-md-1">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      <h1 class="h2">Cotizaciones</h1>
      <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group mr-2">
          <button class="btn btn-sm btn-outline-secondary">Guardar</button>
          <button [disabled]="loading" class="btn btn-sm btn-outline-secondary" (click)="cancelQuote()">Cancelar</button>
        </div>
      </div>
    </div>

    <form #quoteForm="ngForm" class="needs-validation">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="firstName">Nombre</label>
          <div><span *ngIf="!isEdit">{{quote.firstName}}</span></div>
          <input type="text" *ngIf="isEdit" [(ngModel)]="quote.firstName" class="form-control" id="firstName" name="firstName" placeholder="" value="" required="" #firstName>
          <div class="invalid-feedback">
            Por favor ingrese un nombre.
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="lastName">Apellidos</label>
          <div><span *ngIf="!isEdit">{{quote.lastName}}</span></div>
          <input type="text" *ngIf="isEdit" [(ngModel)]="quote.lastName" class="form-control" id="lastName" name="lastName" placeholder="" value="" required="">
          <div class="invalid-feedback">
            Por favor ingrese los apellidos.
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12 mb-3">
          <label for="customer">Cliente / Organización</label>
          <div><span *ngIf="!isEdit">{{quote.customerName}}</span></div>
          <input type="text" *ngIf="isEdit" [(ngModel)]="quote.customerName" class="form-control" id="customer" name="customer" placeholder="" value="" required="">
          <div class="invalid-feedback">
            Por favor ingrese un cliente.
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="phone">Teléfono</label>
          <div><span *ngIf="!isEdit">{{quote.phone}}</span></div>
          <input type="text" *ngIf="isEdit" [(ngModel)]="quote.phone" class="form-control" id="phone" name="phone" placeholder="51 1 2568754" value="" required="">
          <div class="invalid-feedback">
            Por favor ingrese un teléfono válido.
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="email">Correo Electrónico <span class="text-muted">(Opcional)</span></label>
          <div><span *ngIf="!isEdit">{{quote.email}}</span></div>
          <input type="email" *ngIf="isEdit" [(ngModel)]="quote.email" class="form-control" id="email" name="email" placeholder="you@example.com">
          <div class="invalid-feedback">
            Por favor ingrese una dirección de correo electrónico válida para alertas de envío.
          </div>
        </div>
      </div>

      <div class="mb-3">
      </div>

      <div class="mb-3">
        <label for="address">Dirección - linea 1</label>
        <div><span *ngIf="!isEdit">{{quote.address}}</span></div>
        <input type="text" *ngIf="isEdit" [(ngModel)]="quote.address" class="form-control" id="address" name="address" placeholder="1234 Calle Principal" required="">
        <div class="invalid-feedback">
          Por favor ingrese una dirección de envío.
        </div>
      </div>

      <div class="mb-3">
        <label for="address2">Dirección - linea 2 <span class="text-muted">(Opcional)</span></label>
        <input type="text" *ngIf="isEdit" class="form-control" id="address2" placeholder="Nro de departamento o interior">
      </div>

      <div class="row">
        <div class="col-md-5 mb-3">
          <label for="country">País</label>
          <div><span *ngIf="!isEdit">{{quote.country}}</span></div>
          <select *ngIf="isEdit" [(ngModel)]="quote.country" class="custom-select d-block w-100" id="country" name="country" required="">
            <option value="">Seleccione...</option>
            <option>Perú</option>
            <option>Brazil</option>
          </select>
          <div class="invalid-feedback">
            Por favor seleccione un país.
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <label for="state">Ciudad</label>
          <div><span *ngIf="!isEdit">{{quote.city}}</span></div>
          <select *ngIf="isEdit" [(ngModel)]="quote.city" class="custom-select d-block w-100" id="city" name="city" required="">
            <option value="">Seleccione...</option>
            <option>Lima</option>
            <option>Stewart</option>
          </select>
          <div class="invalid-feedback">
            Por favor seleccione una ciudad.
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <label for="province">Provincia</label>
          <div><span *ngIf="!isEdit">{{quote.state}}</span></div>
          <select *ngIf="isEdit" [(ngModel)]="quote.state" class="custom-select d-block w-100" id="state" name="state" required="">
            <option value="">Seleccione...</option>
            <option>Lima</option>
          </select>
          <div class="invalid-feedback">
            Por favor seleccione una provincia.
          </div>
        </div>
      </div>

      <hr class="mb-4">

      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="same-address">
        <label class="custom-control-label" for="same-address">Use la misma dirección para envío y facturación</label>
      </div>
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="save-info">
        <label class="custom-control-label" for="save-info">Use la misma información para una siguiente cotización</label>
      </div>
      <hr class="mb-4">

      <h4 class="mb-3">Items</h4>
      
      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>#</th>
              <th>Código</th>
              <th>Cantidad</th>
              <th>Precio Unitario</th>
              <th>Moneda</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody *ngIf="quote">
            <ng-container *ngFor="let item of quote.items">
              <tr>
                  <td>{{item.line}}</td>
                  <td>{{item.productNo}}</td>
                  <td>{{item.quantity}}</td>
                  <td>{{item.unitPrice}}</td>
                  <td>{{item.currency}}</td>
                  <td>{{item.total}}</td>
                </tr>
            </ng-container>   
          </tbody>
        </table>
      </div>      
      
      <hr class="mb-4">
    </form>
  </div>
</div>